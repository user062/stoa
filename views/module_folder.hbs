<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/material-icons.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">        
</head>
<body>

    <nav class="navbar navbar-expand-md bg-light sticky-top">
        <div class="container">
            <a href="/" class="navbar-brand">
                <img src="images/stoa2.png" alt="stoa">
            </a>
            {{!-- <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#toggleMobileMenu" aria-controls="toggleMobileMenu" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button> --}}            
            <div class="collapse navbar-collapse">
                {{!-- <form class="form-inline ml-5">
                    <input class="search-bar form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">                    
                </form>           --}}
                <ul class="navbar-nav text-center ml-auto">                    
                    <li>
                        <a class="nav-link" href="#">Account</a>
                    </li>                  
                </ul>                      
            </div>
        </div>
    </nav>
        
    <div class="sidebar">
        <ul class="links">
            <a href="/new_post" class="btn btn-primary new__descussion">
                <span class="material-icons">add</span>
                <span class="new__descussion-text">Nouvelle Discussion</span>
            </a>
            <li>                                
                <a class="sidebar__link active" href="/">
                    <span class="material-icons">home</span>
                    Home
                </a>                
            </li>
            <li>                
                <a class="sidebar__link" href="#">
                    <span class="material-icons">
                    chat_bubble_outline
                    </span>           
                    Discussions
                </a>                
            </li>
            <hr style="background-color: #f6f6f6;height: 1px;width: 75%;margin: 1rem auto">      
            {{!-- Button just for profs --}}
            <a href="/new_folder" class="btn btn-secondary new__descussion">
                <span class="material-icons">add</span>
                <span class="new__descussion-text">Nouveau dossier</span>
            </a>                              
            <li class="module__link">                
                <a class="sidebar__link" href="#">
                    <span class="material-icons">folder_open</span>           
                    IHM
                </a>          
                <div class="module__folders ml-4">
                    <a class="module__folder" href="#">
                        <span class="material-icons">folder_open</span>           
                        Coures
                    </a>          
                </div>   
                <div class="module__folders ml-4">
                    <a class="module__folder" href="#">
                        <span class="material-icons">folder_open</span>           
                        TD
                    </a>          
                </div>      
                <div class="module__folders ml-4">
                    <a class="module__folder" href="#">
                        <span class="material-icons">folder_open</span>           
                        Notes
                    </a>          
                </div>      
            </li>
            <li class="module__link">                
                <a class="sidebar__link" href="#">
                    <span class="material-icons">
                    folder_open
                    </span>           
                    Acoo
                </a>                
            </li>
            <li class="module__link">                
                <a class="sidebar__link" href="#">
                    <span class="material-icons">
                    folder_open
                    </span>           
                    Algo
                </a>                
            </li>

            {{!-- <li>                
                <a class="sidebar__link" href="#">
                    <span class="material-icons">local_library</span>
                    Modules
                </a>                
            </li>
            <li>                
                <a class="sidebar__link" href="#">
                    <span class="material-icons">poll</span>
                    Poll
                </a>                
            </li>
            <li>                
                <a class="sidebar__link" href="#">
                    <span class="material-icons">note</span>
                    Notes
                </a>                
            </li>
            <li>                
                <a class="sidebar__link" href="#">
                    <span class="material-icons">article</span>
                    Devoires
                </a>                
            </li> --}}
        </ul>
    </div>
    
    <div class="content">        
        <div class="container">
        <div class="main-body p-0 col-11 mx-auto">
            <div class="inner-wrapper">    
                <!-- Inner main -->
                <div class="inner-main">
                    <div class="container">                        
                        <h4 class="mb-4 module-title" style="font-weight: 800;">Module <span>'nom module'</span></h4>                      
                        <h5>Coures :</h5>                             
                    </div>
                    
                    <!-- Forum List -->
                    <div class="posts">
                      {{!-- {{#each posts as |post|}} --}}
                        <div class="post">
                            <div class="inner-main-body pt-2 collapse forum-content{{post.id}} show" {{#if (eq post.type "p")}} onclick='showResults({{{post.poll.poll_representation.stringify}}}, {{call post.poll "did_vote" ../user }})'{{/if}}>
                                <div class="card mb-2">
                                    <div class="card__tag text-muted">ACOO</div>
                                    <span class="material-icons text-muted tag">
                                      {{!-- {{#if (eq post.type 'p')}}
                                          poll_icon
                                      {{else if (eq post.type 'q')}}
                                          help_icon
                                      {{else}}
                                          note_icon
                                      {{/if}} --}}
                                    </span>
                                    <div class="card-body p-2 p-sm-3">
                                        <div class="media forum-item">
                                            <a href="#" data-toggle="collapse" data-target=".forum-content{{post.id}}"><img src="https://randomuser.me/api/portraits/men/88.jpg" class="mr-3 rounded-circle" width="50" alt="User" /></a>
                                            <div class="media-body">
                                                <h6><a href="#" data-toggle="collapse" data-target=".forum-content{{post.id}}" class="text-body">{{post.title}}</a></h6>
                                                <p class="text-secondary">{{{post.content}}}</p>
                                                <p class="post-time text-muted align-self-end m-0"><span class="text-secondary font-weight-bold">{{{post.get_elapsed_time}}}</span></p>
                                            </div>
                                            {{!-- {{#if (eq post.type "q")}} --}}
                                            <div class="text-muted small  text-center align-self-end">
                                                <span><span id="comm-count">{{post.responses.length}}</span> <span class="material-icons" style="font-size: 16px">chat_bubble</span></span>                                        
                                            </div>
                                            {{!-- {{/if}} --}}
                                        </div>
                                    </div>
                                </div>
                            </div>                    

                            <!-- Forum Detail (replies) -->
                            <div class="inner-main-body p-2 p-sm-3 collapse forum-content{{post.id}}" >
                                <a href="#" class="btn btn-light btn-sm mb-3 has-icon" data-toggle="collapse" data-target=".forum-content{{post.id}}"><i class="fa fa-arrow-left mr-2"></i>Back</a>
                                <div class="card mb-2">
                                    <div class="card-body">
                                        <div class="media forum-item">
                                            <a href="javascript:void(0)" class="card-link">
                                                <img src="https://randomuser.me/api/portraits/men/34.jpg" class="rounded-circle" width="50" alt="User" />                                        
                                            </a>
                                            <div class="media-body ml-3">
                                                <a href="javascript:void(0)" class="text-secondary">{{post.author}}</a>
                                                <small class="text-muted ml-2">{{post.get_elapsed_time}}</small>
                                                <h5 class="mt-1">{{post.title}}</h5>
                                                <div class="mt-3 font-size-sm">
                                                    <p>{{{post.content}}}</p>
                                                    <div id="Poll">
                                                      {{#if (eq post.type "p")}}
                                                      <div class="poll mx-auto" id="poll{{post.poll.poll_representation.id}}">
                                                        <div class="answers" >
                                                          {{#each post.poll.poll_representation.choices as |choice i|}}
                                                          <div class="answer" onClick='markAnswer({{i}}, {{{post.poll.poll_representation.stringify}}}, {{call post.poll "did_vote" ../../user }})'>
                                                            {{choice}}
                                                            <span class="percentage-bar"></span>
                                                            <span class="percentage-value"></span>
                                                          </div>
                                                          {{/each}}
                                                        </div>
                                                      </div>
                                                      {{/if}}
                                                    </div>
                                                    <div class="files mb-2">
                                                      {{#each post.files as |file|}}
                                                        <div class="file">
                                                            <span class="material-icons icon">description</span>
                                                            <span class="file-name">
                                                            <a href={{file.path}}>{{file.name}}</a> 
                                                            </span>
                                                        </div>                                                          
                                                        {{/each}}
                                                    </div>                                                
                                               </div>
                                            <div class="text-muted small  text-right align-self-center">
                                            </div>
                                                {{#if (eq post.type "q")}}
                                                <div class="text-muted small  text-right align-self-center">
                                              <span><span class="material-icons" style="font-size: 16px">forum</span> {{post.responses.length}} </span>                                        
                                                </div>                                            
                                                {{/if}}
                                            </div>
                                            {{#if (eq post.type "q")}}
                                            <a href="/new_reply?{{post.id}}" class="text-muted small">Reply</a>
                                            {{/if}}
                                        </div>
                                </div>                                                                                        
                            </div>                            
                        </div>
                        {{!-- {{/each}} --}}
                        {{!-- End post --}}                    
                        </div>
                    </div>
        </div>
        </div>
    </div>    
</body>
</html>